<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CareerMove - Job Decision Analyzer</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background: #0f0f1e; color: #e0e0e0; line-height: 1.6; }
    
    .landing { min-height: 100vh; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); display: flex; align-items: center; justify-content: center; padding: 40px 20px; text-align: center; position: relative; overflow: hidden; }
    .landing::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle at 20% 50%, rgba(233, 69, 96, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(76, 175, 255, 0.1) 0%, transparent 50%); pointer-events: none; }
    .landing-content { max-width: 900px; color: #fff; position: relative; z-index: 1; }
    .landing h1 { font-size: 72px; margin-bottom: 20px; font-weight: 900; background: linear-gradient(135deg, #4cb5ff 0%, #00d4ff 50%, #64ff9f 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; letter-spacing: -2px; }
    .landing .tagline { font-size: 28px; margin-bottom: 15px; font-weight: 700; color: #e0e0e0; }
    .landing .subtitle { font-size: 18px; margin-bottom: 40px; color: #b0b0b0; line-height: 1.8; }
    .cta-button { display: inline-block; padding: 16px 48px; background: linear-gradient(135deg, #00d4ff 0%, #4cb5ff 100%); color: #0f0f1e; font-size: 18px; font-weight: 700; border: none; border-radius: 12px; cursor: pointer; transition: all 0.3s; box-shadow: 0 10px 30px rgba(76, 181, 255, 0.3); }
    .cta-button:hover { transform: translateY(-3px); box-shadow: 0 15px 50px rgba(76, 181, 255, 0.5); }
    
    .social-proof { margin-top: 50px; padding: 25px; background: rgba(76, 181, 255, 0.08); border-radius: 12px; border: 1px solid rgba(76, 181, 255, 0.2); }
    .social-proof p { margin: 10px 0; font-size: 15px; color: #c0c0c0; }
    
    .how-it-works { margin-top: 100px; padding-top: 80px; border-top: 1px solid rgba(76, 181, 255, 0.2); }
    .how-it-works h2 { font-size: 42px; margin-bottom: 50px; font-weight: 800; background: linear-gradient(135deg, #00d4ff 0%, #64ff9f 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .steps { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; }
    .step { background: linear-gradient(135deg, rgba(76, 181, 255, 0.05) 0%, rgba(100, 255, 159, 0.05) 100%); padding: 35px; border-radius: 16px; text-align: left; border: 1px solid rgba(76, 181, 255, 0.2); transition: all 0.3s; }
    .step:hover { transform: translateY(-5px); border-color: rgba(76, 181, 255, 0.4); background: linear-gradient(135deg, rgba(76, 181, 255, 0.1) 0%, rgba(100, 255, 159, 0.1) 100%); }
    .step-number { display: inline-flex; width: 50px; height: 50px; background: linear-gradient(135deg, #00d4ff 0%, #4cb5ff 100%); color: #0f0f1e; font-weight: 800; border-radius: 50%; align-items: center; justify-content: center; margin-bottom: 20px; font-size: 22px; }
    .step h3 { font-size: 22px; margin-bottom: 12px; font-weight: 700; color: #00d4ff; }
    .step p { color: #a0a0a0; }
    
    .pain-points { margin-top: 100px; padding: 50px 40px; background: linear-gradient(135deg, rgba(233, 69, 96, 0.08) 0%, rgba(255, 107, 107, 0.08) 100%); border-radius: 16px; text-align: left; border: 1px solid rgba(233, 69, 96, 0.2); }
    .pain-points h2 { font-size: 36px; margin-bottom: 30px; color: #ff6b6b; font-weight: 800; }
    .pain-points p { margin-bottom: 20px; color: #c0c0c0; }
    
    .final-cta { margin-top: 100px; padding: 60px 40px; background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(100, 255, 159, 0.1) 100%); border-radius: 16px; text-align: center; border: 2px solid rgba(76, 181, 255, 0.3); }
    .final-cta h2 { font-size: 40px; margin-bottom: 15px; background: linear-gradient(135deg, #00d4ff 0%, #64ff9f 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 800; }
    .final-cta p { color: #b0b0b0; margin-bottom: 30px; }
    
    .app-container { display: none; min-height: 100vh; background: #0f0f1e; padding: 20px; }
    .app-container.show { display: block; }
    .app-content { max-width: 900px; margin: 0 auto; background: #1a1a2e; border-radius: 16px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5); padding: 40px; border: 1px solid rgba(76, 181, 255, 0.2); }
    .app-header { display: flex; align-items: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid rgba(76, 181, 255, 0.2); }
    .back-button { background: none; border: none; font-size: 28px; cursor: pointer; margin-right: 15px; color: #00d4ff; padding: 0; transition: 0.3s; }
    .back-button:hover { transform: scale(1.1); }
    .app-header h1 { font-size: 28px; margin: 0; background: linear-gradient(135deg, #00d4ff 0%, #64ff9f 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    
    h1 { font-size: 32px; color: #e0e0e0; margin-bottom: 8px; }
    .subtitle { color: #a0a0a0; margin-bottom: 30px; font-size: 14px; }
    .section { margin-bottom: 30px; }
    .section h2 { font-size: 18px; color: #00d4ff; margin-bottom: 15px; font-weight: 700; }
    .form-group { margin-bottom: 15px; }
    label { display: block; font-size: 14px; font-weight: 600; color: #c0c0c0; margin-bottom: 8px; }
    input, select, textarea { width: 100%; padding: 12px; border: 1px solid rgba(76, 181, 255, 0.3); background: rgba(76, 181, 255, 0.05); border-radius: 8px; font-size: 14px; font-family: inherit; color: #e0e0e0; transition: all 0.3s; }
    input::placeholder, textarea::placeholder { color: #606070; }
    input:focus, select:focus, textarea:focus { outline: none; border-color: #00d4ff; background: rgba(76, 181, 255, 0.1); box-shadow: 0 0 0 3px rgba(76, 181, 255, 0.15); }
    
    .slider-container { display: flex; align-items: center; gap: 15px; }
    input[type="range"] { flex: 1; cursor: pointer; accent-color: #00d4ff; }
    .slider-value { min-width: 40px; text-align: center; font-weight: 700; color: #64ff9f; background: rgba(100, 255, 159, 0.1); padding: 4px 8px; border-radius: 6px; }
    
    .button-row { display: flex; gap: 10px; margin-top: 30px; flex-wrap: wrap; }
    button { flex: 1; min-width: 150px; padding: 13px 24px; font-size: 16px; font-weight: 700; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s; font-family: inherit; }
    .btn-primary { background: linear-gradient(135deg, #00d4ff 0%, #4cb5ff 100%); color: #0f0f1e; }
    .btn-primary:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(76, 181, 255, 0.3); }
    .btn-secondary { background: rgba(76, 181, 255, 0.1); color: #00d4ff; border: 1px solid rgba(76, 181, 255, 0.3); }
    .btn-secondary:hover:not(:disabled) { background: rgba(76, 181, 255, 0.2); }
    button:disabled { opacity: 0.6; cursor: not-allowed; }
    
    .resume-status { background: rgba(100, 255, 159, 0.1); padding: 12px; border-radius: 8px; border: 1px solid rgba(100, 255, 159, 0.3); margin-bottom: 15px; font-size: 13px; color: #64ff9f; }
    .resume-status.empty { background: rgba(255, 107, 107, 0.1); border-color: rgba(255, 107, 107, 0.3); color: #ff6b6b; }
    
    .file-input-label { display: block; padding: 20px; border: 2px dashed rgba(76, 181, 255, 0.3); border-radius: 8px; text-align: center; cursor: pointer; transition: all 0.3s; background: rgba(76, 181, 255, 0.05); }
    .file-input-label:hover { border-color: rgba(76, 181, 255, 0.6); background: rgba(76, 181, 255, 0.1); }
    .file-input-label input[type="file"] { display: none; }
    
    .recommendation { font-size: 48px; font-weight: 800; margin: 20px 0; padding: 25px; border-radius: 12px; text-align: center; }
    .recommendation.take { background: linear-gradient(135deg, rgba(100, 255, 159, 0.15) 0%, rgba(100, 255, 159, 0.05) 100%); color: #64ff9f; border: 1px solid rgba(100, 255, 159, 0.3); }
    .recommendation.pass { background: linear-gradient(135deg, rgba(255, 107, 107, 0.15) 0%, rgba(255, 107, 107, 0.05) 100%); color: #ff6b6b; border: 1px solid rgba(255, 107, 107, 0.3); }
    .recommendation.negotiate { background: linear-gradient(135deg, rgba(255, 179, 71, 0.15) 0%, rgba(255, 179, 71, 0.05) 100%); color: #ffb347; border: 1px solid rgba(255, 179, 71, 0.3); }
    
    .score { font-size: 24px; font-weight: 700; color: #00d4ff; margin: 15px 0; text-align: center; }
    .explanation { font-size: 16px; color: #a0a0a0; margin: 15px 0; line-height: 1.8; }
    
    .breakdown-item { background: rgba(76, 181, 255, 0.05); padding: 15px; margin-bottom: 12px; border-left: 4px solid #00d4ff; border-radius: 6px; }
    .breakdown-key { font-weight: 700; color: #64ff9f; text-transform: capitalize; }
    .breakdown-value { color: #b0b0b0; margin-top: 5px; font-size: 14px; }
    
    .ai-insight { background: linear-gradient(135deg, rgba(76, 181, 255, 0.1) 0%, rgba(76, 181, 255, 0.05) 100%); padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #4cb5ff; border: 1px solid rgba(76, 181, 255, 0.3); }
    .ai-insight h3 { font-size: 15px; font-weight: 700; margin-bottom: 12px; color: #00d4ff; }
    .ai-insight p { font-size: 14px; color: #b0b0b0; margin: 8px 0; line-height: 1.6; }
    
    .salary-data { background: linear-gradient(135deg, rgba(76, 181, 255, 0.1) 0%, rgba(76, 181, 255, 0.05) 100%); padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #4cb5ff; border: 1px solid rgba(76, 181, 255, 0.3); }
    .salary-data h3 { font-size: 15px; font-weight: 700; margin-bottom: 12px; color: #00d4ff; }
    .salary-data p { font-size: 14px; color: #b0b0b0; margin: 6px 0; }
    
    .email-capture { background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(100, 255, 159, 0.1) 100%); padding: 20px; border-radius: 8px; margin: 20px 0; border: 1px solid rgba(76, 181, 255, 0.3); }
    .email-capture p { color: #a0a0a0; margin-bottom: 12px; font-size: 14px; }
    .email-input-row { display: flex; gap: 10px; margin-bottom: 10px; }
    .email-input-row input { flex: 1; }
    .email-input-row button { flex: 0.3; min-width: 80px; }
    .email-status { font-size: 12px; margin-top: 8px; color: #64ff9f; }
    .email-status.error { color: #ff6b6b; }
    
    .history-item { background: linear-gradient(135deg, rgba(76, 181, 255, 0.05) 0%, rgba(100, 255, 159, 0.05) 100%); padding: 18px; margin-bottom: 12px; border-left: 4px solid #4cb5ff; border-radius: 6px; border: 1px solid rgba(76, 181, 255, 0.2); }
    .history-rec { font-weight: 700; font-size: 16px; color: #00d4ff; }
    .history-date { font-size: 12px; color: #707080; margin-top: 8px; }
    
    .pros-cons { background: rgba(76, 181, 255, 0.05); padding: 20px; border-radius: 8px; margin: 20px 0; border: 1px solid rgba(76, 181, 255, 0.2); }
    .pros-cons h3 { color: #64ff9f; margin-bottom: 10px; font-size: 16px; }
    .pro-item { color: #64ff9f; margin: 8px 0; padding-left: 20px; }
    .pro-item::before { content: '‚úì '; font-weight: bold; }
    .con-item { color: #ff6b6b; margin: 8px 0; padding-left: 20px; }
    .con-item::before { content: '‚úó '; font-weight: bold; }
    
    .comparison { background: rgba(76, 181, 255, 0.05); padding: 20px; border-radius: 8px; margin: 20px 0; border: 1px solid rgba(76, 181, 255, 0.2); }
    .comparison-row { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 12px; align-items: center; }
    .comparison-label { color: #a0a0a0; font-weight: 600; }
    .comparison-current { color: #c0c0c0; }
    .comparison-new { color: #00d4ff; font-weight: 700; }
    
    .hidden { display: none; }
    
    @media (max-width: 768px) {
      .landing h1 { font-size: 48px; }
      .landing .tagline { font-size: 22px; }
      .steps { grid-template-columns: 1fr; }
      .app-content { padding: 25px; max-width: 100%; }
      .comparison-row { grid-template-columns: 1fr; }
      button { min-width: 120px; }
    }
  </style>
</head>
<body>
  <!-- LANDING PAGE -->
  <div id="landingPage" class="landing">
    <div class="landing-content">
      <h1>CareerMove</h1>
      <p class="tagline">Stop making job decisions emotionally.</p>
      <p class="subtitle">AI-powered analysis based on YOUR background, priorities & market data. <strong>Free. No credit card.</strong></p>
      <button class="cta-button" onclick="startApp()">Analyze My Next Offer ‚Üí</button>

      <div class="social-proof">
        <p><strong>‚≠ê 4.9/5</strong> from early users</p>
        <p>"AI actually understood my career trajectory and gave real negotiation advice" - Test User</p>
      </div>

      <div class="how-it-works">
        <h2>How It Works</h2>
        <div class="steps">
          <div class="step">
            <div class="step-number">1</div>
            <h3>Your Background</h3>
            <p>Upload your resume or tell us your background. AI learns your career arc.</p>
          </div>
          <div class="step">
            <div class="step-number">2</div>
            <h3>Enter Job Offer</h3>
            <p>Paste job posting or enter details. AI extracts everything.</p>
          </div>
          <div class="step">
            <div class="step-number">3</div>
            <h3>Get AI Analysis</h3>
            <p>Detailed recommendation + negotiation strategies + career alignment.</p>
          </div>
        </div>
      </div>

      <div class="pain-points">
        <h2>Why People Make Bad Job Decisions</h2>
        <p><strong>‚ùå No Context:</strong> You don't compare to your career growth trajectory.</p>
        <p><strong>‚ùå No Strategy:</strong> You accept offers without negotiating weak points.</p>
        <p><strong>‚ùå No Data:</strong> You guess at market rates instead of knowing real data.</p>
      </div>

      <div class="final-cta">
        <h2>Make smarter career moves</h2>
        <p>AI analyzes your full background in 2 minutes. Let's go.</p>
        <button class="cta-button" onclick="startApp()" style="padding: 18px 56px; font-size: 18px;">Start Now - Free</button>
      </div>

      <footer style="margin-top: 80px; padding-top: 30px; border-top: 1px solid rgba(76, 181, 255, 0.2); text-align: center;">
        <p style="color: #707080; font-size: 14px; margin-bottom: 15px;">
          <a href="privacy.html" style="color: #00d4ff; text-decoration: none; margin: 0 15px; transition: 0.3s;" onmouseover="this.style.color='#64ff9f'" onmouseout="this.style.color='#00d4ff'">Privacy Policy</a>
          <span style="color: #707080;">|</span>
          <a href="terms.html" style="color: #00d4ff; text-decoration: none; margin: 0 15px; transition: 0.3s;" onmouseover="this.style.color='#64ff9f'" onmouseout="this.style.color='#00d4ff'">Terms of Service</a>
          <span style="color: #707080;">|</span>
          <a href="mailto:support@careermove.app" style="color: #00d4ff; text-decoration: none; margin: 0 15px; transition: 0.3s;" onmouseover="this.style.color='#64ff9f'" onmouseout="this.style.color='#00d4ff'">Contact</a>
        </p>
        <p style="color: #606070; font-size: 13px;">&copy; 2024 CareerMove. All rights reserved.</p>
      </footer>
    </div>
  </div>

  <!-- APP -->
  <div id="appContainer" class="app-container">
    <div class="app-content">
      <!-- PROFILE SCREEN -->
      <div id="profileScreen">
        <h1>Your Background</h1>
        <p class="subtitle">Upload your resume or tell us about your career</p>
        
        <div class="section">
          <h2>Resume (Optional but Recommended)</h2>
          <div id="resumeStatus" class="resume-status empty">üìÑ No resume uploaded yet</div>
          <label class="file-input-label">
            üì§ Upload Resume (PDF or TXT)
            <input type="file" id="resumeFile" accept=".pdf,.txt" onchange="handleResumeUpload(event)">
          </label>
          <button class="btn-secondary" id="extractResumeBtn" onclick="extractResumeData()" style="width: 100%; margin-top: 10px; display: none;">ü§ñ Extract from Resume</button>
        </div>

        <div class="section">
          <h2>Current Role</h2>
          <div class="form-group">
            <label>Current Job Title</label>
            <input type="text" id="currentJobTitle" placeholder="e.g., Senior Software Engineer">
          </div>

          <div class="form-group">
            <label>Current Salary ($)</label>
            <input type="number" id="currentSalary" value="80000">
          </div>

          <div class="form-group">
            <label>Current Hours Per Week</label>
            <input type="number" id="currentHours" value="40">
          </div>

          <div class="form-group">
            <label>Years of Experience</label>
            <input type="number" id="yearsExp" value="5" min="0">
          </div>

          <div class="form-group">
            <label>Current Company Size</label>
            <select id="currentCompanySize">
              <option value="startup">Startup (1-50)</option>
              <option value="small">Small (50-500)</option>
              <option value="mid" selected>Mid (500-5000)</option>
              <option value="large">Large (5000+)</option>
            </select>
          </div>
        </div>

        <div class="section">
          <h2>What Matters Most? (1-5 scale)</h2>
          
          <div class="form-group">
            <label>üí∞ Salary & Compensation</label>
            <div class="slider-container">
              <input type="range" id="prioritySalary" min="1" max="5" value="3">
              <span class="slider-value" id="salaryValue">3</span>
            </div>
          </div>

          <div class="form-group">
            <label>‚öñÔ∏è Work-Life Balance</label>
            <div class="slider-container">
              <input type="range" id="priorityBalance" min="1" max="5" value="4">
              <span class="slider-value" id="balanceValue">4</span>
            </div>
          </div>

          <div class="form-group">
            <label>üìà Career Growth & Learning</label>
            <div class="slider-container">
              <input type="range" id="priorityGrowth" min="1" max="5" value="3">
              <span class="slider-value" id="growthValue">3</span>
            </div>
          </div>

          <div class="form-group">
            <label>üõ°Ô∏è Job Stability & Security</label>
            <div class="slider-container">
              <input type="range" id="priorityStability" min="1" max="5" value="4">
              <span class="slider-value" id="stabilityValue">4</span>
            </div>
          </div>

          <div class="form-group">
            <label>üè† Remote Work Flexibility</label>
            <div class="slider-container">
              <input type="range" id="priorityRemote" min="1" max="5" value="3">
              <span class="slider-value" id="remoteValue">3</span>
            </div>
          </div>

          <div class="form-group">
            <label>üéØ Brand & Company Prestige</label>
            <div class="slider-container">
              <input type="range" id="priorityBrand" min="1" max="5" value="2">
              <span class="slider-value" id="brandValue">2</span>
            </div>
          </div>
        </div>

        <div class="button-row">
          <button class="btn-primary" onclick="goToJobScreen()">Next: Enter Job Offer</button>
          <button class="btn-secondary" onclick="showHistory()">View History</button>
        </div>
      </div>

      <!-- JOB SCREEN -->
      <div id="jobScreen" class="hidden">
        <div class="app-header">
          <button class="back-button" onclick="goToProfileScreen()">‚Üê</button>
          <h1>Job Offer Details</h1>
        </div>
        
        <div class="section" style="background: rgba(100, 255, 159, 0.05); padding: 15px; border-radius: 8px; border: 1px solid rgba(100, 255, 159, 0.2); margin-bottom: 20px;">
          <p style="color: #64ff9f; font-size: 13px; margin-bottom: 10px;"><strong>üí° Quick Fill:</strong> Paste a job posting and AI will extract everything</p>
          <div class="form-group">
            <textarea id="jobPostingPaste" placeholder="Paste the full job posting here (LinkedIn, Indeed, email offer, etc.)" style="height: 120px; resize: vertical;"></textarea>
          </div>
          <button class="btn-secondary" onclick="extractJobData()" style="width: 100%;">ü§ñ Auto-Fill from Posting</button>
        </div>

        <div style="text-align: center; color: #707080; margin: 20px 0; font-size: 13px;">‚Äî OR ENTER MANUALLY ‚Äî</div>
        
        <div class="section">
          <div class="form-group">
            <label>Job Title</label>
            <input type="text" id="jobTitle" placeholder="e.g., Senior Software Engineer">
          </div>

          <div class="form-group">
            <label>Company Name</label>
            <input type="text" id="company" placeholder="e.g., Google">
          </div>

          <div class="form-group">
            <label>Base Salary ($)</label>
            <input type="number" id="baseSalary" placeholder="e.g., 150000">
          </div>

          <div class="form-group">
            <label>Equity/Stock Options (% or value)</label>
            <input type="text" id="equity" placeholder="e.g., 0.5% or $50k">
          </div>

          <div class="form-group">
            <label>Bonus (% or $)</label>
            <input type="text" id="bonus" placeholder="e.g., 20% or $20k">
          </div>

          <div class="form-group">
            <label>Hours Per Week</label>
            <input type="number" id="hoursPerWeek" value="45">
          </div>

          <div class="form-group">
            <label>Company Stage</label>
            <select id="fundingStage">
              <option value="seed">Seed Startup (Very High Risk)</option>
              <option value="series-a">Series A (High Risk)</option>
              <option value="series-b">Series B-C (Moderate Risk)</option>
              <option value="growth" selected>Growth Stage (Stable)</option>
              <option value="public">Public Company (Very Safe)</option>
            </select>
          </div>

          <div class="form-group">
            <label>Team Size</label>
            <input type="number" id="teamSize" value="5" min="1">
          </div>

          <div class="form-group">
            <label>Work Environment</label>
            <select id="workEnv">
              <option value="full-remote">Fully Remote</option>
              <option value="hybrid">Hybrid</option>
              <option value="onsite" selected>On-site</option>
            </select>
          </div>

          <div class="form-group">
            <label>Company Industry/Domain</label>
            <input type="text" id="industry" placeholder="e.g., AI/ML, FinTech, Healthcare">
          </div>

          <div class="form-group">
            <label>Any concerns or notes?</label>
            <textarea id="concerns" placeholder="e.g., Long commute, unclear growth path, company culture concerns..."></textarea>
          </div>
        </div>

        <div class="button-row">
          <button class="btn-primary" id="analyzeBtn" onclick="analyzeOffer()">Analyze This Offer</button>
        </div>
      </div>

      <!-- RESULT SCREEN -->
      <div id="resultScreen" class="hidden">
        <div class="app-header">
          <button class="back-button" onclick="goToJobScreen()">‚Üê</button>
          <h1>Analysis</h1>
        </div>
        
        <div id="resultContent"></div>

        <div class="email-capture">
          <p><strong>üíæ Save This Analysis</strong></p>
          <div class="email-input-row">
            <input type="email" id="resultEmail" placeholder="your@email.com">
            <button class="btn-secondary" onclick="saveAnalysisToEmail()">üìß Email</button>
            <button class="btn-secondary" onclick="exportToPDF()">üì• PDF</button>
          </div>
          <div id="emailStatus" class="email-status"></div>
        </div>

        <div class="button-row">
          <button class="btn-primary" onclick="goToJobScreen()">Analyze Another</button>
          <button class="btn-secondary" onclick="goToProfileScreen()">Update Profile</button>
        </div>
      </div>

      <!-- HISTORY SCREEN -->
      <div id="historyScreen" class="hidden">
        <div class="app-header">
          <button class="back-button" onclick="goToProfileScreen()">‚Üê</button>
          <h1>Your Decisions</h1>
        </div>
        <div id="historyContent"></div>
        <div class="button-row">
          <button class="btn-secondary" onclick="goToProfileScreen()">Back</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    const GEMINI_API_KEY = "AIzaSyC2sRcbHx60x2eCfp7-lgoOsybV3dXVRIg";  // ‚Üê your key
    
    let resumeData = null;
    let decisions = [];
    let lastAnalysis = null;

    ['prioritySalary', 'priorityBalance', 'priorityGrowth', 'priorityStability', 'priorityRemote', 'priorityBrand'].forEach(id => {
      document.getElementById(id).addEventListener('input', (e) => {
        const name = id.replace('priority', '').toLowerCase();
        document.getElementById(name + 'Value').textContent = e.target.value;
      });
    });

    function startApp() {
      document.getElementById('landingPage').style.display = 'none';
      document.getElementById('appContainer').classList.add('show');
    }

    function showScreen(screenId) {
      document.querySelectorAll('[id$="Screen"]').forEach(el => el.classList.add('hidden'));
      document.getElementById(screenId).classList.remove('hidden');
    }

    function goToProfileScreen() { showScreen('profileScreen'); }
    function goToJobScreen() { showScreen('jobScreen'); }

    async function handleResumeUpload(event) {
      const file = event.target.files[0];
      if (!file) return;

      const statusEl = document.getElementById('resumeStatus');
      const extractBtn = document.getElementById('extractResumeBtn');
      
      statusEl.textContent = '‚è≥ Reading resume...';
      statusEl.classList.remove('empty');

      try {
        let text = '';
        if (file.type === 'application/pdf') {
          text = await extractTextFromPDF(file);
        } else if (file.type === 'text/plain') {
          text = await file.text();
        } else {
          throw new Error('Unsupported file type');
        }

        resumeData = { text, fileName: file.name };
        statusEl.innerHTML = `‚úÖ Resume loaded: <strong>${file.name}</strong>`;
        statusEl.classList.remove('empty');
        extractBtn.style.display = 'block';
      } catch (error) {
        console.error('Error reading resume:', error);
        statusEl.textContent = '‚ùå Error reading file. Try again.';
        statusEl.classList.add('empty');
        extractBtn.style.display = 'none';
      }
    }

    async function extractTextFromPDF(file) {
      const arrayBuffer = await file.arrayBuffer();
      const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;
      let text = '';
      
      for (let i = 1; i <= pdf.numPages; i++) {
        const page = await pdf.getPage(i);
        const content = await page.getTextContent();
        text += content.items.map(item => item.str).join(' ') + '\n';
      }
      return text;
    }

    async function extractResumeData() {
      if (!resumeData) return;

      const btn = document.getElementById('extractResumeBtn');
      btn.textContent = '‚è≥ Extracting...';
      btn.disabled = true;

      const prompt = `Extract comprehensive career information from this resume. Return ONLY valid JSON:
{
  "currentJobTitle": "string",
  "yearsOfExperience": number,
  "companies": [{"name": "string", "years": number}],
  "skills": ["skill1", "skill2"],
  "careerSummary": "2-3 sentence summary of career progression"
}

Resume:
${resumeData.text}`;

      try {
        const response = await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "x-goog-api-key": "AIzaSyC2sRcbHx60x2eCfp7-lgoOsybV3dXVRIg"
          },
          body: JSON.stringify({
            contents: [{ parts: [{ text: prompt }] }]
          })
        });

        const data = await response.json();
        const textContent = data.candidates[0].content.parts[0].text;
        const jsonMatch = textContent.match(/\{[\s\S]*\}/);
        
        if (!jsonMatch) throw new Error('Could not parse');

        const extracted = JSON.parse(jsonMatch[0]);

        if (extracted.currentJobTitle) {
          document.getElementById('currentJobTitle').value = extracted.currentJobTitle;
        }
        if (extracted.yearsOfExperience) {
          document.getElementById('yearsExp').value = extracted.yearsOfExperience;
        }

        btn.textContent = '‚úÖ Extracted!';
        setTimeout(() => {
          btn.textContent = 'ü§ñ Extract from Resume';
          btn.disabled = false;
        }, 2000);
      } catch (error) {
        console.error('Extraction error:', error);
        btn.textContent = '‚ùå Failed';
        setTimeout(() => {
          btn.textContent = 'ü§ñ Extract from Resume';
          btn.disabled = false;
        }, 2000);
      }
    }

    async function extractJobData() {
      const jobPosting = document.getElementById('jobPostingPaste').value.trim();
      if (!jobPosting) {
        alert('Please paste a job posting first');
        return;
      }

      const button = event.target;
      button.textContent = '‚è≥ Extracting...';
      button.disabled = true;

      try {
        const response = await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "x-goog-api-key": "AIzaSyC2sRcbHx60x2eCfp7-lgoOsybV3dXVRIg"
          },
          body: JSON.stringify({
            contents: [{
              parts: [{
                text: `Extract all job details from this posting. Return ONLY valid JSON:
{
  "jobTitle": "string",
  "company": "string",
  "baseSalary": number,
  "equity": "string or null",
  "bonus": "string or null",
  "hoursPerWeek": number,
  "isRemote": boolean,
  "workEnv": "full-remote|hybrid|onsite",
  "fundingStage": "seed|series-a|series-b|growth|public",
  "teamSize": number,
  "industry": "string"
}

Job posting:
${jobPosting}`
              }]
            }]
          })
        });

        const data = await response.json();
        const textContent = data.candidates[0].content.parts[0].text;
        const jsonMatch = textContent.match(/\{[\s\S]*\}/);
        
        if (!jsonMatch) throw new Error('Could not extract');

        const extracted = JSON.parse(jsonMatch[0]);

        if (extracted.jobTitle) document.getElementById('jobTitle').value = extracted.jobTitle;
        if (extracted.company) document.getElementById('company').value = extracted.company;
        if (extracted.baseSalary) document.getElementById('baseSalary').value = extracted.baseSalary;
        if (extracted.equity) document.getElementById('equity').value = extracted.equity;
        if (extracted.bonus) document.getElementById('bonus').value = extracted.bonus;
        if (extracted.hoursPerWeek) document.getElementById('hoursPerWeek').value = extracted.hoursPerWeek;
        if (extracted.workEnv) document.getElementById('workEnv').value = extracted.workEnv;
        if (extracted.fundingStage) document.getElementById('fundingStage').value = extracted.fundingStage;
        if (extracted.teamSize) document.getElementById('teamSize').value = extracted.teamSize;
        if (extracted.industry) document.getElementById('industry').value = extracted.industry;

        button.textContent = '‚úÖ Filled!';
        setTimeout(() => {
          button.textContent = 'ü§ñ Auto-Fill from Posting';
          button.disabled = false;
        }, 2000);

      } catch (error) {
        console.error('Error:', error);
        alert('Failed to extract. Try again or fill manually.');
        button.textContent = 'ü§ñ Auto-Fill from Posting';
        button.disabled = false;
      }
    }

    async function analyzeOffer() {
      const currentSalary = parseInt(document.getElementById('currentSalary').value);
      const baseSalary = parseInt(document.getElementById('baseSalary').value);
      const jobTitle = document.getElementById('jobTitle').value;
      const company = document.getElementById('company').value;

      if (!baseSalary || !jobTitle || !company) {
        alert('Please fill in job title, company, and salary');
        return;
      }

      const btn = document.getElementById('analyzeBtn');
      btn.textContent = '‚è≥ AI Analyzing...';
      btn.disabled = true;

      const profile = {
        currentJobTitle: document.getElementById('currentJobTitle').value,
        currentSalary,
        currentHours: parseInt(document.getElementById('currentHours').value),
        yearsExp: parseInt(document.getElementById('yearsExp').value),
        currentCompanySize: document.getElementById('currentCompanySize').value,
        priority_salary: parseInt(document.getElementById('prioritySalary').value),
        priority_balance: parseInt(document.getElementById('priorityBalance').value),
        priority_growth: parseInt(document.getElementById('priorityGrowth').value),
        priority_stability: parseInt(document.getElementById('priorityStability').value),
        priority_remote: parseInt(document.getElementById('priorityRemote').value),
        priority_brand: parseInt(document.getElementById('priorityBrand').value),
        resumeData: resumeData ? resumeData.text.substring(0, 2000) : null
      };

      const job = {
        jobTitle,
        company,
        baseSalary,
        equity: document.getElementById('equity').value,
        bonus: document.getElementById('bonus').value,
        hoursPerWeek: parseInt(document.getElementById('hoursPerWeek').value),
        workEnv: document.getElementById('workEnv').value,
        fundingStage: document.getElementById('fundingStage').value,
        teamSize: parseInt(document.getElementById('teamSize').value),
        industry: document.getElementById('industry').value,
        concerns: document.getElementById('concerns').value
      };

      try {
        const aiAnalysis = await getAIAnalysis(profile, job);
        const salaryData = getSalaryData(jobTitle);
        
        decisions.push({ ...aiAnalysis, job, profile, salaryData, timestamp: new Date().toLocaleString() });
        displayResult(aiAnalysis, salaryData, job, profile);
        showScreen('resultScreen');
      } catch (error) {
        console.error('Analysis error:', error);
        alert('Error during analysis. Please try again.');
      } finally {
        btn.textContent = 'Analyze This Offer';
        btn.disabled = false;
      }
    }

    async function getAIAnalysis(profile, job) {
      const prompt = `You are an expert career coach and negotiation strategist. Analyze this job offer comprehensively and provide a logically consistent recommendation.

RECOMMENDATION RULES:
- TAKE (8-10/10): Aligns with priorities, good salary, minimal downsides. Accept as-is.
- NEGOTIATE (5-7/10): Has potential BUT missing key things (lower salary, worse hours, etc). Worth negotiating ON SPECIFIC ITEMS.
- PASS (0-4/10): Too many fundamental misalignments. Even if you negotiate, likely won't fix core issues.

USER PROFILE:
- Current: ${profile.currentJobTitle}, ${profile.currentSalary}/year, ${profile.currentHours}h/week
- Experience: ${profile.yearsExp} years
- Company size: ${profile.currentCompanySize}
- Priorities (1-5): Salary=${profile.priority_salary}, Balance=${profile.priority_balance}, Growth=${profile.priority_growth}, Stability=${profile.priority_stability}, Remote=${profile.priority_remote}, Brand=${profile.priority_brand}
${profile.resumeData ? `- Background: ${profile.resumeData}` : ''}

JOB OFFER:
- Title: ${job.jobTitle} @ ${job.company}
- Salary: ${job.baseSalary}/year (vs current ${profile.currentSalary})
- Equity: ${job.equity || 'None mentioned'}
- Bonus: ${job.bonus || 'None mentioned'}
- Hours: ${job.hoursPerWeek}h/week (vs current ${profile.currentHours})
- Setup: ${job.workEnv}
- Stage: ${job.fundingStage}
- Team: ${job.teamSize} people
- Industry: ${job.industry}
- Concerns: ${job.concerns || 'None'}

IMPORTANT: Match recommendation to score. Only use NEGOTIATE if 5-7/10. If score is 3/10, must be PASS. If 8+, must be TAKE.

Provide JSON:
{
  "recommendation": "TAKE|PASS|NEGOTIATE",
  "score": 0-10,
  "confidence": 0-100,
  "scoringBreakdown": {
    "salary": "explanation with percentage change and market position",
    "workLife": "explanation of hours and balance impact",
    "growth": "explanation of learning/career progression opportunity",
    "stability": "explanation based on company stage",
    "remote": "explanation of work setup vs preference",
    "brand": "explanation of company prestige impact"
  },
  "strengths": ["strength1", "strength2", "strength3"],
  "weaknesses": ["weakness1", "weakness2", "weakness3"],
  "negotiableItems": ["item1 - specific thing to push for", "item2"],
  "careerImpact": "2-3 sentences on career trajectory impact",
  "reasoning": "2-3 sentences - WHY this recommendation at this score",
  "riskFactors": "key risks if you take this",
  "questions": ["question1 to ask?", "question2 to ask?"]
}`;

      const response = await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "x-goog-api-key": "AIzaSyC2sRcbHx60x2eCfp7-lgoOsybV3dXVRIg"
        },
        body: JSON.stringify({
          contents: [{ parts: [{ text: prompt }] }]
        })
      });

      const data = await response.json();
      const textContent = data.candidates[0].content.parts[0].text;
      const jsonMatch = textContent.match(/\{[\s\S]*\}/);
      
      if (!jsonMatch) throw new Error('Invalid response');
      
      return JSON.parse(jsonMatch[0]);
    }

    function getSalaryData(jobTitle) {
      const ranges = {
        'engineer': { low: 90000, high: 250000, median: 160000 },
        'manager': { low: 110000, high: 280000, median: 180000 },
        'designer': { low: 80000, high: 180000, median: 130000 },
        'product': { low: 100000, high: 250000, median: 170000 },
        'developer': { low: 85000, high: 220000, median: 150000 },
        'analyst': { low: 70000, high: 180000, median: 120000 },
        'architect': { low: 120000, high: 300000, median: 200000 },
        'default': { low: 60000, high: 180000, median: 110000 }
      };
      const key = Object.keys(ranges).find(k => jobTitle.toLowerCase().includes(k)) || 'default';
      return ranges[key];
    }

    function displayResult(analysis, salaryData, job, profile) {
      lastAnalysis = { analysis, salaryData, job, profile };
      
      const recClass = analysis.recommendation === 'TAKE' ? 'take' : 
                       analysis.recommendation === 'PASS' ? 'pass' : 'negotiate';
      
      const salaryChange = job.baseSalary - profile.currentSalary;
      const salaryPercent = ((salaryChange / profile.currentSalary) * 100).toFixed(1);
      const percentile = Math.round(((job.baseSalary - salaryData.low) / (salaryData.high - salaryData.low)) * 100);
      
      let html = `
        <div class="recommendation ${recClass}">${analysis.recommendation}</div>
        <div class="score">Alignment Score: ${analysis.score}/10 (${analysis.confidence}% confidence)</div>
        <div class="explanation">${analysis.reasoning}</div>

        <div class="ai-insight">
          <h3>üíº Career Impact</h3>
          <p>${analysis.careerImpact}</p>
        </div>

        <div class="comparison">
          <h3 style="color: #00d4ff; margin-bottom: 15px;">üìä Offer vs Current</h3>
          <div class="comparison-row">
            <div class="comparison-label">Base Salary</div>
            <div class="comparison-current">${profile.currentSalary.toLocaleString()}</div>
            <div class="comparison-new">${job.baseSalary.toLocaleString()} (${salaryPercent > 0 ? '+' : ''}${salaryPercent}%)</div>
          </div>
          <div class="comparison-row">
            <div class="comparison-label">Hours/Week</div>
            <div class="comparison-current">${profile.currentHours}h</div>
            <div class="comparison-new">${job.hoursPerWeek}h (${job.hoursPerWeek - profile.currentHours > 0 ? '+' : ''}${job.hoursPerWeek - profile.currentHours})</div>
          </div>
          <div class="comparison-row">
            <div class="comparison-label">Hourly Rate</div>
            <div class="comparison-current">${(profile.currentSalary / (profile.currentHours * 52)).toFixed(0)}/hr</div>
            <div class="comparison-new">${(job.baseSalary / (job.hoursPerWeek * 52)).toFixed(0)}/hr</div>
          </div>
        </div>

        <div class="salary-data">
          <h3>üìà Market Data for ${job.jobTitle}</h3>
          <p><strong>Your offer:</strong> ${job.baseSalary.toLocaleString()}</p>
          <p><strong>Market range:</strong> ${salaryData.low.toLocaleString()} - ${salaryData.high.toLocaleString()}</p>
          <p><strong>Your position:</strong> ${percentile}th percentile (${percentile < 30 ? 'below' : percentile < 70 ? 'at' : 'above'} market)</p>
          ${job.equity ? `<p><strong>Equity:</strong> ${job.equity}</p>` : ''}
          ${job.bonus ? `<p><strong>Bonus:</strong> ${job.bonus}</p>` : ''}
        </div>

        <div class="pros-cons">
          <h3 style="color: #64ff9f; margin-bottom: 12px;">‚úÖ Strengths</h3>
          ${analysis.strengths.map(s => `<div class="pro-item">${s}</div>`).join('')}
        </div>

        <div class="pros-cons">
          <h3 style="color: #ff6b6b; margin-bottom: 12px;">‚ö†Ô∏è Weaknesses</h3>
          ${analysis.weaknesses.map(w => `<div class="con-item">${w}</div>`).join('')}
        </div>

        ${analysis.recommendation === 'NEGOTIATE' && analysis.negotiableItems ? `
        <div class="ai-insight">
          <h3>ü§ù What to Negotiate</h3>
          <p style="margin-bottom: 12px; color: #64ff9f;">This offer has potential. Push back on these specific items:</p>
          ${analysis.negotiableItems.map(p => `<p style="margin: 8px 0;">‚Ä¢ ${p}</p>`).join('')}
        </div>
        ` : ''}

        <div class="ai-insight">
          <h3>‚ö° Risk Factors</h3>
          <p>${analysis.riskFactors}</p>
        </div>

        <div class="section">
          <h2>Scoring Breakdown</h2>
          ${Object.entries(analysis.scoringBreakdown).map(([key, val]) => 
            `<div class="breakdown-item"><div class="breakdown-key">${key}</div><div class="breakdown-value">${val}</div></div>`
          ).join('')}
        </div>

        <div class="ai-insight">
          <h3>‚ùì Questions to Ask Employer</h3>
          ${analysis.questions.map(q => `<p>‚Ä¢ ${q}</p>`).join('')}
        </div>
      `;

      document.getElementById('resultContent').innerHTML = html;
    }

    function saveAnalysisToEmail() {
      const email = document.getElementById('resultEmail').value.trim();
      const statusEl = document.getElementById('emailStatus');

      if (!email) {
        statusEl.textContent = '‚ùå Please enter your email';
        statusEl.classList.add('error');
        return;
      }

      if (!email.includes('@')) {
        statusEl.textContent = '‚ùå Invalid email';
        statusEl.classList.add('error');
        return;
      }

      statusEl.classList.remove('error');
      statusEl.textContent = '‚è≥ Sending...';

      setTimeout(() => {
        statusEl.textContent = '‚úÖ Saved! (Backend integration coming soon)';
        statusEl.classList.remove('error');
        document.getElementById('resultEmail').value = '';
        setTimeout(() => {
          statusEl.textContent = '';
        }, 4000);
      }, 800);
    }

    function exportToPDF() {
      if (!lastAnalysis) return;

      const { analysis, salaryData, job, profile } = lastAnalysis;
      
      const htmlContent = `
        <html>
          <head>
            <title>CareerMove - ${job.company} Analysis</title>
            <style>
              body { font-family: Arial, sans-serif; margin: 40px; color: #333; }
              h1 { color: #00d4ff; margin-bottom: 10px; }
              h2 { color: #00d4ff; margin-top: 25px; margin-bottom: 15px; border-bottom: 2px solid #00d4ff; padding-bottom: 8px; }
              .section { margin-bottom: 20px; }
              .label { font-weight: bold; color: #333; }
              .value { margin-left: 10px; color: #555; }
              .recommendation { font-size: 24px; font-weight: bold; padding: 15px; border-radius: 8px; margin: 15px 0; }
              .take { background-color: #d4f4dd; color: #00a341; }
              .pass { background-color: #f4d4d4; color: #cc0000; }
              .negotiate { background-color: #f4e8d4; color: #cc6600; }
              ul { margin: 10px 0; }
              li { margin: 8px 0; }
              table { width: 100%; border-collapse: collapse; margin: 15px 0; }
              th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
              th { background-color: #f0f0f0; font-weight: bold; }
            </style>
          </head>
          <body>
            <h1>CareerMove - Job Offer Analysis</h1>
            <p><strong>Generated:</strong> ${new Date().toLocaleString()}</p>
            <p><strong>Company:</strong> ${job.company} | <strong>Position:</strong> ${job.jobTitle}</p>
            
            <h2>Recommendation</h2>
            <div class="recommendation ${analysis.recommendation.toLowerCase().replace(' ', '-').split(' ')[0]}">
              ${analysis.recommendation} - Score: ${analysis.score}/10 (${analysis.confidence}% confidence)
            </div>
            
            <h2>Executive Summary</h2>
            <p>${analysis.reasoning}</p>
            
            <h2>Career Impact</h2>
            <p>${analysis.careerImpact}</p>
            
            <h2>Offer Comparison</h2>
            <table>
              <tr>
                <th>Metric</th>
                <th>Current</th>
                <th>New Offer</th>
              </tr>
              <tr>
                <td>Base Salary</td>
                <td>${profile.currentSalary.toLocaleString()}</td>
                <td>${job.baseSalary.toLocaleString()}</td>
              </tr>
              <tr>
                <td>Change</td>
                <td colspan="2">${((job.baseSalary - profile.currentSalary) / profile.currentSalary * 100).toFixed(1)}%</td>
              </tr>
              <tr>
                <td>Hours/Week</td>
                <td>${profile.currentHours}h</td>
                <td>${job.hoursPerWeek}h</td>
              </tr>
              <tr>
                <td>Hourly Rate</td>
                <td>${(profile.currentSalary / (profile.currentHours * 52)).toFixed(0)}/hr</td>
                <td>${(job.baseSalary / (job.hoursPerWeek * 52)).toFixed(0)}/hr</td>
              </tr>
            </table>
            
            <h2>Strengths</h2>
            <ul>
              ${analysis.strengths.map(s => `<li>${s}</li>`).join('')}
            </ul>
            
            <h2>Weaknesses</h2>
            <ul>
              ${analysis.weaknesses.map(w => `<li>${w}</li>`).join('')}
            </ul>
            
            ${analysis.recommendation === 'NEGOTIATE' && analysis.negotiableItems ? `
            <h2>Negotiation Points</h2>
            <ul>
              ${analysis.negotiableItems.map(n => `<li>${n}</li>`).join('')}
            </ul>
            ` : ''}
            
            <h2>Market Data</h2>
            <p><strong>Your Offer:</strong> ${job.baseSalary.toLocaleString()}</p>
            <p><strong>Market Range:</strong> ${salaryData.low.toLocaleString()} - ${salaryData.high.toLocaleString()}</p>
            <p><strong>Percentile:</strong> ${Math.round(((job.baseSalary - salaryData.low) / (salaryData.high - salaryData.low)) * 100)}th</p>
            
            <h2>Risk Factors</h2>
            <p>${analysis.riskFactors}</p>
            
            <h2>Questions to Ask Employer</h2>
            <ul>
              ${analysis.questions.map(q => `<li>${q}</li>`).join('')}
            </ul>
            
            <h2>Scoring Breakdown</h2>
            ${Object.entries(analysis.scoringBreakdown).map(([key, val]) => `
              <div class="section">
                <div class="label">${key.toUpperCase()}:</div>
                <div class="value">${val}</div>
              </div>
            `).join('')}
          </body>
        </html>
      `;

      const script = document.createElement('script');
      script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js';
      script.onload = function() {
        const element = document.createElement('div');
        element.innerHTML = htmlContent;
        
        const opt = {
          margin: 10,
          filename: `CareerMove-${job.company}-Analysis.pdf`,
          image: { type: 'jpeg', quality: 0.98 },
          html2canvas: { scale: 2 },
          jsPDF: { orientation: 'portrait', unit: 'mm', format: 'a4' }
        };
        
        html2pdf().set(opt).from(element).save();
      };
      document.head.appendChild(script);
    }

    function showHistory() {
      if (decisions.length === 0) {
        document.getElementById('historyContent').innerHTML = '<p style="color:#a0a0a0; text-align:center; padding: 30px;">No decisions yet. Evaluate your first offer!</p>';
      } else {
        let html = '';
        decisions.forEach((d) => {
          html += `<div class="history-item">
            <div class="history-rec">${d.recommendation} (${d.score}/10)</div>
            <div style="color: #c0c0c0; font-weight: 500;">${d.job.jobTitle} @ ${d.job.company}</div>
            <div style="color:#909090; font-size:13px;">
              ${d.job.baseSalary.toLocaleString()} ‚Ä¢ ${d.job.hoursPerWeek}h/week ‚Ä¢ ${d.job.fundingStage}
            </div>
            <div class="history-date">${d.timestamp}</div>
          </div>`;
        });
        document.getElementById('historyContent').innerHTML = html;
      }
      showScreen('historyScreen');
    }
  </script>
</body>
</html>
